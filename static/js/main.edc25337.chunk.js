(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGaleryitem_ImageGalleryItem__1akCg",ImageGalleryItemImage:"ImageGaleryitem_ImageGalleryItemImage__PwfCJ"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3VEyi",Modal:"Modal_Modal__3A-3Q"}},29:function(e,t,a){e.exports={ButtonClass:"Button_ButtonClass__2bsTR"}},35:function(e,t,a){},36:function(e,t,a){},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__ButAD",SearchForm:"Searchbar_SearchForm__1TGhn",SearchFormButton:"Searchbar_SearchFormButton__1ufL2",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__3FUce",SearchFormInput:"Searchbar_SearchFormInput__2g3T-"}},7:function(e,t,a){e.exports={ImageGallery:"ImageGalery_ImageGallery__2PqA3",loader:"ImageGalery_loader__3Dt5M",init:"ImageGalery_init__2iuBw",error:"ImageGalery_error__35Cll"}},78:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(24),o=a.n(c),s=(a(35),a(4)),u=(a(36),a(37),a(5)),i=a.n(u),l=a(0);function h(e){var t=e.getSearchValue,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(l.jsx)("header",{className:i.a.Searchbar,children:Object(l.jsxs)("form",{className:i.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return alert("nothing to search!");t(c),o("")},children:[Object(l.jsx)("button",{type:"submit",className:i.a.SearchFormButton,children:Object(l.jsx)("span",{className:i.a.SearchFormButtonLabel,children:"Search"})}),Object(l.jsx)("input",{name:"searchValue",value:c,className:i.a.SearchFormInput,type:"text",placeholder:"Search images and photos",onChange:function(e){o(e.target.value)}})]})})}var m=a(15),g=a(12),b=a.n(g);function j(e){var t=e.searchResult,a=e.onImgClick;return Object(l.jsx)(l.Fragment,{children:t.map((function(e){return Object(l.jsx)("li",{className:b.a.ImageGalleryItem,children:Object(l.jsx)("img",{src:e.webformatURL,alt:"",className:b.a.ImageGalleryItemImage,onClick:a})},e.id)}))})}var f=a(13),d=a.n(f),p=a(25),O=a(26),_=a(27),y=a(28),S=a.n(y),x=function(){function e(){Object(O.a)(this,e),this._searchQuery="",this._page=1}return Object(_.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchPhotos",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://pixabay.com/api/?key=23260269-a14f68c41e91863ff9df952e6&q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12"),e.prev=1,e.next=4,S.a.get(t);case 4:return a=e.sent,r=a.data.hits,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),v=a(29),I=a.n(v);function w(e){return Object(l.jsx)("button",{className:I.a.ButtonClass,type:"button",onClick:e.handleClick,children:"Load More"})}var k=a(7),F=a.n(k),C=a(30),G=a.n(C),N=a(14),B=a.n(N);function L(e){var t=e.modalImg,a=e.onClose;Object(r.useEffect)((function(){return console.log("modal mount!"),window.addEventListener("keydown",n),function(){console.log("modal UnMount"),window.removeEventListener("keydown",n)}}),[]);var n=function(e){"Escape"===e.code&&a()};return Object(l.jsx)("div",{className:B.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(l.jsx)("div",{className:B.a.Modal,children:Object(l.jsx)("img",{src:t,alt:"modalImg"})})})}var E=new x;function M(e){var t=e.searchValue,a=e.pageScroll,n=Object(r.useState)([]),c=Object(s.a)(n,2),o=c[0],u=c[1],i=Object(r.useState)("init"),h=Object(s.a)(i,2),g=h[0],b=h[1],f=Object(r.useState)(!1),d=Object(s.a)(f,2),p=d[0],O=d[1],_=Object(r.useState)(""),y=Object(s.a)(_,2),S=y[0],x=y[1];Object(r.useEffect)((function(){""!==t&&(console.log("fetch!!"),b("loading"),E.resetPage(),E.searchQuery=t,E.searchPhotos().then((function(e){e.length>0?(u(e),b("success")):b("error")})).catch((function(e){console.log("catch result",e),b("error")})))}),[t]);var v=function(){O((function(e){return!e}))};return Object(l.jsxs)(l.Fragment,{children:["init"===g&&Object(l.jsx)("p",{className:F.a.init,children:"Enter your query"}),"loading"===g&&Object(l.jsx)("div",{className:F.a.loader,children:Object(l.jsx)(G.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80})}),"success"===g&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("ul",{className:F.a.ImageGallery,children:Object(l.jsx)(j,{searchResult:o,onImgClick:function(e){console.log(e.target),x(o.find((function(t){return t.webformatURL===e.target.src})).largeImageURL),v()}})}),Object(l.jsx)(w,{handleClick:function(e){E.page=1,E.searchPhotos().then((function(e){u((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),a()})).catch((function(e){b("error")}))}}),p&&Object(l.jsx)(L,{modalImg:S,onClose:v})]}),"error"===g&&Object(l.jsx)("p",{className:F.a.error,children:"Something is wrong"})]})}function P(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),a=(t[0],t[1],Object(r.useState)("")),n=Object(s.a)(a,2),c=n[0],o=n[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(h,{getSearchValue:function(e){o(e)}}),Object(l.jsx)(M,{searchValue:c,pageScroll:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}})]})}var T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,79)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root")),T()}},[[78,1,2]]]);
//# sourceMappingURL=main.edc25337.chunk.js.map